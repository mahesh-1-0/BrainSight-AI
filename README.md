# ğŸ§  Brain Tumor Detection System

An AI-powered web application for detecting brain tumors from MRI scans using deep learning and Grad-CAM visualization. The system uses TensorFlow/Keras for model inference and Google's Gemini AI for medical analysis.

## Features

- ğŸ¯ **Brain Tumor Detection**: Classifies brain scans into glioma, meningioma, or tumor categories
- ğŸ” **Grad-CAM Visualization**: Highlights regions of interest in the brain scan
- ğŸ¤– **AI-Powered Analysis**: Uses Google Gemini AI for detailed medical analysis
- ğŸ“„ **PDF Report Generation**: Creates professional medical reports with visualizations
- ğŸŒ **Web Interface**: User-friendly Flask web application

## Tech Stack

- **Backend**: Flask (Python)
- **ML Framework**: TensorFlow/Keras
- **Computer Vision**: OpenCV
- **AI Analysis**: Google Gemini API
- **PDF Generation**: ReportLab
- **Deployment**: Render (or any WSGI-compatible server)

## Project Structure

```
ml-website/
â”œâ”€â”€ app.py                 # Main Flask application
â”œâ”€â”€ best_model_dense.h5    # Trained TensorFlow model
â”œâ”€â”€ requirements.txt        # Python dependencies
â”œâ”€â”€ env.example            # Environment variables template
â”œâ”€â”€ render.yaml            # Render deployment configuration
â”œâ”€â”€ templates/             # HTML templates
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ upload.html
â”‚   â””â”€â”€ result.html
â”œâ”€â”€ uploads/               # User uploaded images (gitignored)
â”œâ”€â”€ outputs/               # Generated reports and images (gitignored)
â”œâ”€â”€ examples/              # Example brain scan images
â””â”€â”€ scripts/               # Utility scripts for testing
    â””â”€â”€ final cam edit.py  # Test script for Grad-CAM visualization
```

## Setup Instructions

### Local Development

1. **Clone the repository**
   ```bash
   git clone <your-repo-url>
   cd ml-website
   ```

2. **Create a virtual environment**
   ```bash
   python -m venv venv
   
   # On Windows
   venv\Scripts\activate
   
   # On macOS/Linux
   source venv/bin/activate
   ```

3. **Install dependencies**
   ```bash
   pip install -r requirements.txt
   ```

4. **Set environment variables**
   
   Copy the example environment file and fill in your values:
   ```bash
   # On Windows (PowerShell)
   Copy-Item env.example .env
   
   # On macOS/Linux
   cp env.example .env
   ```
   
   Then edit `.env` and set your actual values:
   ```bash
   SECRET_KEY=your-secret-key-here
   GEMINI_API_KEY=your-gemini-api-key-here
   ```
   
   **Note:** The `.env` file is gitignored for security. See `env.example` for all available configuration options.

5. **Run the application**
   ```bash
   python app.py
   ```
   
   The app will be available at `http://localhost:5000`

### Production Deployment (Render)

1. **Push to GitHub**
   ```bash
   git add .
   git commit -m "Initial commit"
   git push origin main
   ```

2. **Deploy on Render**
   - Go to [Render Dashboard](https://dashboard.render.com)
   - Click "New +" â†’ "Web Service"
   - Connect your GitHub repository
   - Render will auto-detect the `render.yaml` configuration
   - Set the `GEMINI_API_KEY` environment variable in the Render dashboard:
     - Go to Environment â†’ Add Environment Variable
     - Key: `GEMINI_API_KEY`
     - Value: Your Gemini API key
   - Click "Create Web Service"

3. **Environment Variables in Render**
   - `GEMINI_API_KEY`: Your Google Gemini API key (required)
   - `SECRET_KEY`: Flask secret key (auto-generated by Render)
   - `PORT`: Automatically set by Render (default: 10000)

## Usage

1. **Enter Patient Name**: Start by entering the patient's name
2. **Upload Brain Scan**: Upload an MRI brain scan image (JPG, PNG)
3. **View Results**: See the detection results with Grad-CAM visualization
4. **Download Report**: Download a comprehensive PDF report with AI analysis

## Model Information

- **Model Architecture**: EfficientNetB0-based classifier
- **Classes**: 
  - `brain_glioma`
  - `brain_menin` (meningioma)
  - `brain_tumor`
- **Input Size**: 224x224 pixels
- **Visualization**: 512x512 pixels with Grad-CAM overlay

## Important Notes

âš ï¸ **Medical Disclaimer**: This application is for educational and research purposes only. It should NOT be used as a substitute for professional medical diagnosis, treatment, or advice. Always consult with qualified healthcare professionals.

## API Keys

To use the Gemini AI analysis feature, you need a Google Gemini API key:
1. Go to [Google AI Studio](https://makersuite.google.com/app/apikey)
2. Create a new API key
3. Set it as the `GEMINI_API_KEY` environment variable in your `.env` file

**Optional:** Install `python-dotenv` to automatically load `.env` file:
```bash
pip install python-dotenv
```

This allows the app to automatically load environment variables from `.env` file in local development.

## Troubleshooting

### Model File Too Large for GitHub
If `best_model_dense.h5` is too large (>100MB), consider:
- Using Git LFS: `git lfs track "*.h5"`
- Hosting the model file separately and downloading it during deployment
- Compressing the model file

### Render Deployment Issues
- Ensure all dependencies in `requirements.txt` are compatible
- Check Render logs for specific error messages
- Verify environment variables are set correctly
- Model loading may take time on first request (cold start)

## License

This project is provided as-is for educational purposes.

## Contributing

Contributions are welcome! Please feel free to submit a Pull Request.
